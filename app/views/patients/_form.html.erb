
<%= simple_form_for(@patient) do |f| %>
  <% if @patient.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@patient.errors.count, "error") %> prohibited this patient from being saved:</h2>

      <ul>
      <% @patient.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


    <div class="container">
        <div class="row-fluid">
            <div class="span8 offset2" style="padding: 40px;padding-right:80px;padding-top: 20px;-webkit-box-shadow: 0 2px 10px rgba(0, 0, 0, .25);-moz-box-shadow: 0 2px 10px rgba(0,0,0,.25);box-shadow: 0 2px 10px rgba(0, 0, 0, .25);background-color: white;">



    <h2>Adicionar(Editar) Paciente</h2>
    <div class="span12">
        <form>
            <fieldset>
                <div>
                    <label>Nome</label>
                    <%= f.text_field :name, { :class => "span12", :onfocus => "alertas()", :type => "text", :placeholder => "Escreve o seu nome" } %>
                </div>
                
                <div>
                    <label>Morada</label>
                    <%= f.text_field :address, { :class => "span12", :onfocus => "alertas()", :type => "text", :placeholder => "Escreve a sua morada" } %>
                </div>
                <div class="row-fluid">
                    <div class = "span6">
                        <label>BI</label>
                        <%= f.text_field :identification_code, { :class => "span12", :onfocus => "alertas()", :type => "text", :placeholder => "Escreve o seu BI" } %>
                    </div>
                    <div class="span6">
                        <label>Email</label>
                        <%= f.text_field :email, { :class => "span12", :onfocus => "alertas()", :type => "text", :placeholder => "Escreve o seu email" } %>
                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <label>Telefone</label>
                            <%= f.text_field :telephone, { :class => "span12", :onfocus => "alertas()", :type => "text", :placeholder => "Escreve o seu numero de telefone" } %>
                        </div>
                        <div class="span6">
                            <label>Telem√≥vel</label>
                            <%= f.text_field :mobilephone, { :class => "span12", :onfocus => "alertas()", :type => "text", :placeholder => "Escreve o seu numero de telemovel" } %>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <%= f.association :gender, label_method: :description, :prompt => "Selecione o seu sexo", :label => "Sexo", :input_html => { :class => 'span12'}  %>
                        </div>
                        <div class="span6">
                            <label>Data de Nascimento</label>
                            <div class="input-append date" id="dp1" data-date="01-01-1990" data-date-format="dd-mm-yyyy" data-date-viewmode="years">
                                    <input onfocus="alertas()" style="85%" class="span11" size="16" type="text" value="01-01-1990" readonly>
                                    <span class="add-on"><i class="icon-calendar"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <%= f.association :civil_status, label_method: :description, :prompt => "Selecione o seu estado civil", :include_blank => false, :label => "Estado Civil", :input_html => { :class => 'span12'} %>
                        </div>
                        <div class="span6">
                            <%= f.association :handedness, label_method: :description, :prompt => "Selecione a lateralidade", :include_blank => false, :label => "Lateralidade", :input_html => { :class => 'span12'}  %>
                        </div>
                    </div>
                    <% if @pageType == "edit" %>
                        <div class="row-fluid">
                            <div class="span6">
                                <label>Password</label>
                                <%= f.text_field :palavrapass, { :class => "span12", :onfocus => "alertas()", :type => "password", :placeholder => "Escreve a sua password" } %>
                            </div>
                            <div class="span6">
                                <label>Confirmar Password</label>
                                <input id="palavrapassrepete" onfocus="alertas()" class="span12" type="password">
                            </div>
                        </div>
                        <div>
                            <label>Fotografia</label>
                            <input id="fotografia" class="span6" type="file">
                        </div>
                    <% end %>
                    <div>
                        <button onclick="limpaDados()" class="btn span2 offset05 pull-right">Limpar</button>
                    </div>
                    <div>
                        <button type="submit" class="btn span2 pull-right">Submeter</button>
                    </div>    
                </div>

            </fieldset>
        </form>
    </div>
      
            </div>
        </div>
    </div>

    <% end %>


    <div class="span3"></div>
    </div>
    <!--button-succes--> <!--button-danger--> <!--button-warning--> 
    <script type="text/javascript">
        function echeck(str) {
            var at="@"
            var dot="."
            var lat=str.indexOf(at)
            var lstr=str.length
            var ldot=str.indexOf(dot)
            if (str.indexOf(at)==-1){
                return false
            }
            if (str.indexOf(at)==-1 || str.indexOf(at)==0 || str.indexOf(at)==lstr){
                return false
            }
            if (str.indexOf(dot)==-1 || str.indexOf(dot)==0 || str.indexOf(dot)==lstr){
                return false
            }
            if (str.indexOf(at,(lat+1))!=-1){
                return false
            }
            if (str.substring(lat-1,lat)==dot || str.substring(lat+1,lat+2)==dot){
            alert("Invalid E-mail ID")
            return false
            }
            if (str.indexOf(dot,(lat+2))==-1){
                return false
            }

            if (str.indexOf(" ")!=-1){
                return false
            }
            return true
        }
        function validarEmail(){
            var emailID=document.getElementById('email')
            
            if ((emailID.value==null)||(emailID.value=="")){
                return false
            }
            if (echeck(emailID.value)==false){
                emailID.focus()
                return false
            }
            return true
        }
        function alertas()
        {
            if(document.getElementById('bi').value.length<=8){
               $('#bi').css({"border":"solid 1px #f00"}); 
            }
            else
            {
                $('#bi').css({"border":"solid 1px #6CD54B"}); 
            }
            if((document.getElementById('palavrapass').value == null || document.getElementById('palavrapass').value == "") ||
                (document.getElementById('palavrapass').value != document.getElementById('palavrapassrepete').value)){
               $('#palavrapass').css({"border":"solid 1px #f00"}); 
               $('#palavrapassrepete').css({"border":"solid 1px #f00"}); 
            }
            else
            {
                $('#palavrapass').css({"border":"solid 1px #6CD54B"}); 
                $('#palavrapassrepete').css({"border":"solid 1px #6CD54B"}); 
            }
            if(!validarEmail())
            {   
                $('#email').css({"border":"solid 1px #f00"}); 
            }
            else
            {
                $('#email').css({"border":"solid 1px #6CD54B"}); 
            }
            if(document.getElementById('nome').value == null || document.getElementById('nome').value == "")
            {
                $('#nome').css({"border":"solid 1px #f00"}); 
            }
            else
            {
                $('#nome').css({"border":"solid 1px #6CD54B"}); 
            }
            if(document.getElementById('morada').value == null || document.getElementById('morada').value == "")
            {
                $('#morada').css({"border":"solid 1px #f00"}); 
            }
            else
            {
                $('#morada').css({"border":"solid 1px #6CD54B"}); 
            }
            if(document.getElementById('telefone').value == null || document.getElementById('telefone').value == "")
            {
                $('#telefone').css({"border":"solid 1px #0052FF"}); 
            }
            else if(isNaN(document.getElementById('telefone').value))
            {
                $('#telefone').css({"border":"solid 1px #f00"}); 
            }
            else
            {
                $('#telefone').css({"border":"solid 1px #6CD54B"});                
            }
            if(document.getElementById('telemovel').value == null || document.getElementById('telemovel').value == "")
            {
                $('#telemovel').css({"border":"solid 1px #0052FF"}); 
            }
            else if(isNaN(document.getElementById('telemovel').value))
            {
                $('#telemovel').css({"border":"solid 1px #f00"}); 
            }
            else
            {
                $('#telemovel').css({"border":"solid 1px #6CD54B"}); 
            }
        }
    </script>
    
    <script type="text/javascript">
        function limpaDados()
        {
            document.getElementById("nome").value='';
            document.getElementById("morada").value='';
            document.getElementById("bi").value='';
            document.getElementById("email").value='';
            document.getElementById("palavrapass").value='';
            document.getElementById("palavarapassrepete").value='';
            document.getElementById("telefone").value='';
            document.getElementById("telemovel").value='';
            
        }
    </script>
  



    <script>
           
                    window.prettyPrint && prettyPrint();
                    $('#dp1').datepicker();

    </script>

